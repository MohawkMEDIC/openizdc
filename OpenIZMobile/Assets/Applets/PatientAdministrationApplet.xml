<?xml version="1.0" encoding="UTF-8"?>
<AppletManifest xmlns="http://openiz.org/applet">
  <info id="org.timr.applet.patientAdministration" version="0.5.0.0">
    <icon>app://openiz.org/drawable/cogs</icon>
    <name lang="en">Patient Administration</name>
    <groupName lang="en">Administration</groupName>
    <author>OpenIZ.org Community</author>
    <dependency id="org.openiz.core" version="0.5.0.0" />
    <dependency id="org.timr.applet.layout" version="0.5.0.0"/>
  
  </info>
  <menuItem>
    <icon>app://openiz.org/drawable/drk_baby</icon>
    <text>Children</text>
    <menuItem launch="app://openiz.org/applet/org.timr.applet.patientAdministration/patientSearch">
      <icon>app://openiz.org/drawable/drk_patient_search</icon>
      <text>Find Child</text>
    </menuItem>
    <menuItem launch="app://openiz.org/applet/org.timr.applet.patientAdministration/patientRegister">
      <icon>app://openiz.org/drawable/drk_register_patient</icon>
      <text>Register Child</text>
    </menuItem>
  </menuItem>
  <asset name="patientSearchResultTable" mimeType="text/html">
    <contentHtml>
      <content>
        <table xmlns="http://www.w3.org/1999/xhtml" ng-if="searchResults" class="table table-striped table-bordered">
          <thead>
            <tr>
              <th>{{ 'locale.tableHeaders.names' | i18n }}</th>
              <th>{{ 'locale.tableHeaders.dateOfBirth' | i18n }}</th>
              <th>{{ 'locale.tableHeaders.gender' | i18n }}</th>
              <th>{{ 'locale.tableHeaders.cityVillage' | i18n }}</th>
              <th>{{ 'locale.tableHeaders.healthFacility' | i18n }}</th>
              <th>{{ 'locale.tableHeaders.actions' | i18n }}</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="patient in searchResults.items">
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td>
                <span class="btn-group">
                  <button class="btn btn-primary" ng-click="view(patient)">
                    {{ 'locale.buttonLabels.view' | i18n }}<span class="glyphicon glyphicon-eye-open"></span>
                  </button>
                  <button type="button" class="btn btn-primary" data-toggle="modal" autocomplete="off" ng-click="setModalPatient(patient, $index)" data-target="#myModal" ng-class="{'btn-success':patient.CheckedIn==true}">
                    {{ 'locale.buttonLabels.checkIn' | i18n }}
                  </button>
                </span>
              </td>
            </tr>
          </tbody>
          <tfoot>
            <tr>
              <td colspan="2">{{ searchResults.offset }} .. {{ searchResults.offset + searchResults.count }} of {{ searchResults.totalResults }} </td>
            </tr>
          </tfoot>
        </table>
      </content>
    </contentHtml>
  </asset>
  <asset name="patientSearch" mimeType="text/html">
    <contentHtml>
      <!-- absolute reference to the layout -->
      <layout>app://openiz.org/applet/org.timr.applet.layout/layout</layout>
      <script>patient-search-controller</script>
      <bundle>select2</bundle>
      <content lang="en">
        <div class="row" ng-controller="PatientSearchController"  xmlns="http://www.w3.org/1999/xhtml">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" href="#searchPanel">{{ 'locale.buttonLabels.patientSearch' | i18n }}</a>
              </h4>
            </div>
            <div class="panel-collapse collapse in" id="searchPanel">
              <div class="panel-body">
                <form name="patientSearchForm" role="form" novalidate="novalidate" ng-submit="search(patientSearchForm.$invalid)">
                  <div class="panel-group">
                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <h3 class="panel-title text-center">
                          <a data-toggle="collapse" href="#barcodeCollapse">{{ 'locale.panelLabels.barcodeScan' | i18n }}</a>
                        </h3>
                      </div>
                      <div id="barcodeCollapse" class="panel-collapse collapse in">
                        <div class="panel-body">
                          <fieldset class="form-horizontal">
                            <div class="form-group">
                              <label class="col-xs-2 col-xs-offset-2 control-label" for="barcodeInput">{{ 'locale.inputLabels.identifier' | i18n }}</label>
                              <div class="col-xs-6 input-group">
                                <input type="number" name="barcode" id="barcodeInput" class="form-control" placeholder="{{ 'locale.placeholders.barcode' | i18n }}" aria-describedby="barcodeAddon" ng-model="query.identifiers.value">
                                  <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="scanBarcodeLink()">
                                      <span class="glyphicon glyphicon-barcode">
                                      </span>{{ 'locale.buttonLabels.scan' | i18n }}
                                    </button>
                                  </span>
                                </input>
                              </div>
                            </div>
                          </fieldset>
                        </div>
                      </div>
                    </div>
                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <h3 class="panel-title text-center">
                          <a data-toggle="collapse" href="#patientDemographicCollapse">{{ 'locale.panelLabels.patientDemographicCriteria' | i18n }}</a>
                        </h3>
                      </div>
                      <div id="patientDemographicCollapse" class="panel-collapse collapse">
                        <div class="panel-body">
                          <fieldset class="form-horizontal">

                            <div class="form-group">
                              <div ng-class="{ 'has-error': patientSearchForm.givenName.$invalid &amp;&amp; (patientSearchForm.givenName.$touched||patientSearchForm.$submitted)}">
                                <label class="col-xs-2 col-xs-offset-2 control-label" for="givenNameInput">{{ 'locale.inputLabels.givenName' | i18n }}</label>
                                <div class="col-xs-6">
                                  <input type="text" name="givenName" id="givenNameInput" ng-model="query.names.given" ng-maxlength="50" class="form-control" placeholder="{{ 'locale.placeholders.givenName' | i18n }}" aria-describedby="givenNameAddon" />
                                </div>
                              </div>
                              <div class="col-xs-offset-2 col-xs-9" ng-messages="patientSearchForm.givenName.$error" ng-if="patientSearchForm.givenName.$touched||patientSearchForm.$submitted" role="alert">
                                <div ng-message="maxlength" class="alert alert-danger">{{ 'locale.errors.fieldLong' | i18n }}</div>
                              </div>
                            </div>

                            <div class="form-group">
                              <div ng-class="{ 'has-error': patientSearchForm.familyName.$invalid &amp;&amp; (patientSearchForm.familyName.$touched||patientSearchForm.$submitted)}">
                                <label class="col-xs-2 col-xs-offset-2 control-label" for="familyNameInput">{{ 'locale.inputLabels.familyName' | i18n }}</label>
                                <div class="col-xs-6">
                                  <input type="text" name="familyName" id="familyNameInput" ng-model="query.names.family" ng-maxlength="50" class="form-control" placeholder="{{ 'locale.placeholders.familyName' | i18n }}" aria-describedby="familyNameAddon" />
                                </div>
                              </div>
                              <div class="col-xs-offset-2 col-xs-9" ng-messages="patientSearchForm.familyName.$error" role="alert" ng-if="patientSearchForm.familyName.$touched||patientSearchForm.$submitted">
                                <div ng-message="maxlength" class="alert alert-danger">{{ 'locale.errors.fieldLong' | i18n }}</div>
                              </div>
                            </div>
                            <div class ="form-group">
                              <label class="col-xs-2 col-xs-offset-2 control-label" for="dobFromInput">{{ 'locale.inputLabels.dateOfBirthFrom' | i18n }}</label>
                              <div class="col-xs-6 date input-group" id="dobFromPicker">
                                <input readonly="readonly" type="text" name="dobFrom" id="dobFromInput" class="form-control" ng-blur="updateDobFrom()" aria-describedby="dobAddon" ng-model="query.dob.from" uib-datepicker-popup="dd-MMMM-yyyy" is-open="popupFrom.opened" datepicker-options="dateOptionsFrom">
                                  <span class="input-group-addon" ng-click="openFrom()">
                                    <span class="glyphicon glyphicon-calendar">
                                    </span>
                                  </span>
                                </input>
                              </div>
                            </div>
                            <div class="form-group">
                              <label class="col-xs-2 col-xs-offset-2 control-label" for="dobToInput">{{ 'locale.inputLabels.dateOfBirthTo' | i18n }}</label>
                              <div class="date col-xs-6 input-group" id="dobToPicker">
                                <input readonly="readonly" type="text" name="dobTo" id="dobToInput" class="form-control" ng-blur="updateDobTo()" aria-describedby="dobAddon" ng-model="query.dob.to" uib-datepicker-popup="dd-MMMM-yyyy" is-open="popupTo.opened" datepicker-options="dateOptionsTo">
                                  <span class="input-group-addon" ng-click="openTo()">
                                    <span class="glyphicon glyphicon-calendar">
                                    </span>
                                  </span>
                                </input>
                              </div>
                            </div>

                            <div class ="form-group">
                              <label class ="col-xs-2 col-xs-offset-2 control-label" for="genderSelect">{{ 'locale.inputLabels.gender' | i18n }}</label>
                              <div class="col-xs-6">
                                <select name="gender" id="genderSelect" class="form-control" aria-describedby="genderAddon" ng-model="query.gender">
                                  <option ng-repeat="(key, value) in locale.gender" value="{{value}}">{{value}}</option>
                                </select>
                              </div>
                            </div>

                            <div class="form-group">
                              <div ng-class="{ 'has-error': patientSearchForm.motherGivenName.$invalid &amp;&amp; (patientSearchForm.motherGivenName.$touched||patientSearchForm.$submitted)}">
                                <label class="col-xs-2 col-xs-offset-2 control-label" for="motherGivenNameInput">{{ 'locale.inputLabels.motherGivenName' | i18n }}</label>
                                <div class="col-xs-6">
                                  <input type="text" name="motherGivenName" id="motherGivenNameInput" ng-model="query.mother.given" ng-maxlength="50" class="form-control" placeholder="{{ 'locale.placeholders.motherGivenName' | i18n }}" aria-describedby="motherGivenNameAddon" />
                                </div>
                              </div>
                              <div class="col-xs-offset-2 col-xs-9" ng-messages="patientSearchForm.motherGivenName.$error" role="alert" ng-if="patientSearchForm.motherGivenName.$touched||patientSearchForm.$submitted">
                                <div ng-message="maxlength" class="alert alert-danger">{{ 'locale.errors.fieldLong' | i18n }}</div>
                              </div>
                            </div>
                            <div class="form-group">
                              <div ng-class="{ 'has-error': patientSearchForm.motherFamilyName.$invalid &amp;&amp; (patientSearchForm.motherFamilyName.$touched||patientSearchForm.$submitted)}">
                                <label class ="col-xs-2 col-xs-offset-2 control-label" for="motherFamilyNameInput">{{ 'locale.inputLabels.motherFamilyName' | i18n }}</label>
                                <div class="col-xs-6">
                                  <input type="text" name="motherFamilyName" id="motherFamilyNameInput" ng-model="query.mother.family" ng-maxlength="50" class="form-control" placeholder="{{ 'locale.placeholders.motherFamilyName' | i18n }}" aria-describedby="motherFamilyNameAddon" />
                                </div>
                              </div>
                              <div class="col-xs-offset-2 col-xs-9" ng-messages="patientSearchForm.motherFamilyName.$error" ng-if="patientSearchForm.motherFamilyName.$touched||patientSearchForm.$submitted" role="alert">
                                <div ng-message="maxlength" class="alert alert-danger">{{ 'locale.errors.fieldLong' | i18n }}</div>
                              </div>
                            </div>
                          </fieldset>
                        </div>
                      </div>
                    </div>

                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <h3 class="panel-title text-center">
                          <a data-toggle="collapse" href="#additionalCriteriaCollapse">{{ 'locale.panelLabels.additionalSearchCriteria' | i18n }}</a>
                        </h3>
                      </div>
                      <div id="additionalCriteriaCollapse" class="panel-collapse collapse">
                        <div class="panel-body">
                          <fieldset class="form-horizontal">

                            <div class="form-group">
                              <div ng-class="{ 'has-error': patientSearchForm.city.$invalid &amp;&amp; (patientSearchForm.city.$touched||patientSearchForm.$submitted)}">
                                <label class="col-xs-2 col-xs-offset-2 control-label" id="cityInput">{{ 'locale.inputLabels.cityVillage' | i18n }}</label>
                                <div class="col-xs-6">
                                  <input type="text" name="city" ng-maxlength="50" id="cityInput" ng-model="cityInput" class="form-control" placeholder="{{ 'locale.placeholders.cityVillage' | i18n }}" aria-describedby="cityAddon" />
                                </div>
                                <div class="col-xs-offset-2 col-xs-9" ng-messages="patientSearchForm.city.$error" role="alert" ng-if="patientSearchForm.city.$touched||patientSearchForm.$submitted">
                                  <div ng-message="maxlength" class="alert alert-danger">{{ 'locale.errors.fieldLong' | i18n }}</div>
                                </div>
                              </div>
                            </div>
                            <div class="form-group">
                              <label class="col-xs-2 col-xs-offset-2 control-label" for="healthFacilityInput">{{ 'locale.inputLabels.healthFacility' | i18n }}</label>
                              <div class ="col-xs-6">
                                <input type="text" name="healthFacility" id="healthFacilityInput" ng-model="healthFacilityInput" class="form-control" placeholder="{{ 'locale.placeholders.healthFacility' | i18n }}" aria-describedby="healthFacilityAddon" />
                              </div>
                            </div>
                          </fieldset>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="btn-group pull-right">
                    <button type="submit" class="btn btn-danger" ng-click="cancel()">
                      <span class="glyphicon glyphicon-remove"></span>
                      {{ 'locale.buttonLabels.cancel' | i18n }}
                    </button>
                    <button type="submit" class="btn btn-primary">
                      <span class="glyphicon glyphicon-search"></span> {{ 'locale.buttonLabels.search' | i18n }}
                      
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <div class="panel panel-default" ng-if="searchResults">
            <div class="panel-heading">
              <h4 class="panel-title">
                {{ 'locale.tableHeaders.results' | i18n }}
              </h4>
            </div>
            <!-- #include virtual="patientSearchResultTable" -->
            <div class="panel-body" ng-if="searchResults">
              <div class="btn-group pull-right">
                <button class="btn btn-danger" ng-click="cancel()">
                  <span class="glyphicon glyphicon-remove"></span>
                  {{ 'locale.buttonLabels.cancel' | i18n }}
                </button>
                <button ng-click="searchAgain()" class="btn btn-default">
                  <span class="glyphicon glyphicon-filter"></span> {{ 'locale.buttonLabels.searchAgain' | i18n }}
                </button>
                <a href="patientRegister" class="btn btn-primary ">
                  <span class="glyphicon glyphicon-plus-sign"></span> {{ 'locale.buttonLabels.patientRegister' | i18n }}
                </a>
              </div>
            </div>
            <div class="modal fade" id="myModal" role="dialog">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <h4 class="modal-title">{{ 'locale.modalHeaders.checkInPatient' | i18n }}</h4>
                  </div>
                  <div class="modal-body">
                    <p>{{ 'locale.modalText.nextAppointment + modalPatient.Appointment' | i18n }}</p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-right" ng-click="modalPatient.CheckedIn = !modalPatient.CheckedIn; setPatient()" data-dismiss="modal">
                      <span ng-if="!modalPatient.CheckedIn">{{ 'locale.buttonLabels.checkIn' | i18n }}</span>
                      <span ng-if="modalPatient.CheckedIn">{{ 'locale.buttonLabels.checkOut' | i18n }}</span>
                    </button>
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal">{{ 'locale.buttonLabels.close' | i18n }}</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </content>
    </contentHtml>
  </asset>
  <asset name="patientRegister" mimeType="text/html">
    <contentHtml>
      <!-- absolute reference to the layout -->
      <layout>app://openiz.org/applet/org.timr.applet.layout/layout</layout>
      <script>app://openiz.org/asset/js/moment.min.js</script>
      <bundle>select2</bundle>
      <script>app://openiz.org/asset/js/bootstrap-datetimepicker.min.js</script>
      <script>patient-register-controller</script>
      <content>
        <div class="row" ng-controller="PatientRegisterController" xmlns="http://www.w3.org/1999/xhtml">
          <div class="container">
            <div class="row">
              <div class="col-xs-12">
                <form name="patientRegisterForm" role="form" novalidate="novalidate" ng-submit="register(patientRegisterForm.$invalid)">
                  <div class="panel-group">
                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <h3 class="panel-title">
                          <a data-toggle="collapse" href="#demoInfoCollapse">{{ 'locale.panelLabels.patientDemographicCriteria' | i18n }}</a>
                        </h3>
                      </div>
                      <div id="demoInfoCollapse" class="panel-collapse collapse in">
                        <div class="panel-body">
                          <div class="row">
                            <div class="col-xs-12">
                              <fieldset class="form-horizontal form-group">

                                <div ng-repeat="firstName in patient.patientNames.givenNames track by $index">
                                  <div class="form-group" ng-class="{ 'has-error': (patientRegisterForm['givenName-' + $index].$touched||patientRegisterForm.$submitted) &amp;&amp; patientRegisterForm['givenName-' + $index].$invalid }">

                                    <label class="col-xs-2 control-label" for="givenNameInput">{{ 'locale.inputLabels.givenName' | i18n }}</label>

                                    <div class="col-xs-9 input-group">
                                      <input type="text" name="givenName-{{ $index }}" ng-model="patient.patientNames.givenNames[$index]" class="form-control" placeholder="{{ 'locale.placeholders.givenName' | i18n }}" id="givenNameInput" />

                                      <div class="input-group-btn">
                                        <button class="btn btn-default btn-custom" type="button" ng-click="add('patientNames', 'givenNames', '')">
                                          <span class="glyphicon glyphicon-plus"></span>
                                        </button>
                                        <button class="btn btn-default btn-custom" type="button" ng-click="remove($index, 'patientNames', 'givenNames')">
                                          <span class="glyphicon glyphicon-minus"></span>
                                        </button>
                                      </div>
                                    </div>
                                  </div>

                                  <div class="col-xs-offset-2 col-xs-9" ng-messages="patientRegisterForm['givenName-' + $index].$error" ng-if="patientRegisterForm['givenName-' + $index].$touched||patientRegisterForm.$submitted">
                                    <p class="alert alert-danger" ng-message="required">{{ 'locale.errors.givenNameRequired' | i18n }}</p>
                                  </div>
                                </div>

                                <div ng-repeat="lastName in patient.patientNames.familyNames track by $index">
                                  <div class="form-group" ng-class="{ 'has-error': (patientRegisterForm['familyName-' + $index].$touched||patientRegisterForm.$submitted) &amp;&amp; patientRegisterForm['familyName-' + $index].$invalid }">

                                    <label class="col-xs-2 control-label" for="familyNameInput">{{ 'locale.inputLabels.familyName' | i18n }}</label>
                                    <div class="col-xs-9 input-group">

                                      <input type="text" name="familyName-{{ $index }}" ng-model="patient.patientNames.familyNames[$index]" class="form-control" placeholder="{{ 'locale.placeholders.familyName' | i18n }}" id="familyNameInput"  />

                                      <div class="input-group-btn">
                                        <button class="btn btn-default btn-custom" type="button" ng-click="add('patientNames', 'familyNames', '')">
                                          <span class="glyphicon glyphicon-plus"></span>
                                        </button>
                                        <button class="btn btn-default btn-custom" type="button" ng-click="remove($index, 'patientNames', 'familyNames')">
                                          <span class="glyphicon glyphicon-minus"></span>
                                        </button>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-xs-offset-2 col-xs-9" ng-messages="patientRegisterForm['familyName-' + $index].$error" ng-if="patientRegisterForm['familyName-' + $index].$touched||patientRegisterForm.$submitted">
                                    <p class="alert alert-danger" ng-message="required">{{ 'locale.errors.familyNameRequired' | i18n }}</p>
                                  </div>
                                </div>

                                <div class="form-group" ng-class="{ 'has-error': (patientRegisterForm['dob'].$touched||patientRegisterForm.$submitted) &amp;&amp; patientRegisterForm['dob'].$invalid }">
                                  <label class="col-xs-2 control-label" for="dobInput">{{ 'locale.inputLabels.dateOfBirth' | i18n }}</label>
                                  <div class="col-xs-9 input-group">
                                    <div class="input-group date">
                                      <input required="required" readonly="readonly" type="text" name="date" id="dobInput" class="form-control" ng-model="patient.dob.date" uib-datepicker-popup="dd/MMMM/yyyy" is-open="popupDOB.opened" datepicker-options="dateOptions">
                                        <span class="input-group-addon addon-background" ng-click="openDOB()">
                                          <span class="glyphicon glyphicon-calendar">
                                          </span>
                                        </span>
                                      </input>

                                      <span class="input-group-addon addon-background" id="accuracyAddon">{{ 'locale.inputLabels.accuracy' | i18n }}</span>

                                      <select name="accuracy" ng-model="patient.dob.accuracy" class="form-control" aria-describedby="accuracyAddon">
                                        <option value="4">{{ 'locale.accuracy.year' | i18n }}</option>
                                        <option value="7">{{ 'locale.accuracy.month' | i18n }}</option>
                                        <option value="10">{{ 'locale.accuracy.day' | i18n }}</option>
                                      </select>
                                    </div>
                                  </div>

                                  <div class="col-xs-offset-2 col-xs-9" ng-messages="patientRegisterForm['dob-' + $index].$error" ng-if="patientRegisterForm['dob-' + $index].$touched||patientRegisterForm.$submitted">
                                    <p  class="alert alert-danger" ng-message="required">{{ 'locale.errors.dob' | i18n }}</p>
                                  </div>
                                </div>

                                <div class="form-group">
                                  <label class="col-xs-2 control-label" id="genderAddon">{{ 'locale.inputLabels.gender' | i18n }}</label>
                                  <div class="col-xs-9 input-group">
                                    <select ng-change="searchForDuplicates()" name="gender" ng-model="patient.gender" class="form-control" aria-describedby="genderAddon" required="required" ng-options="concept.id as concept.text for concept in administrativeGenderTypes">
                                      <option ng-repeat="(key, value) in locale.gender" value="{{value}}">{{value}}</option>
                                    </select>
                                  </div>
                                </div>

                                
                              </fieldset>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="panel-heading" ng-if="searchResults">
                        <h3 class="panel-title">
                          <a data-toggle="collapse" href="#potentialDupCollapse">{{ 'locale.panelLabels.potentialDuplicates' | i18n }}</a>
                        </h3>
                      </div>
                      <!-- #include virtual="patientSearchResultTable" -->
                    </div>

                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <h3 class="panel-title">
                          <a data-toggle="collapse" href="#identityCollapse">{{ 'locale.panelLabels.identification' | i18n }}</a>
                        </h3>
                      </div>
                      <div id="identityCollapse" class="panel-collapse collapse in">
                        <div class="panel-body">
                          <div class="row">
                            <div class="col-xs-12">
                              <fieldset class="form-horizontal form-group">
                                <div ng-repeat="identifier in patient.identifiers track by $index">
                                  <div class="form-group" ng-class="{ 'has-error': (patientRegisterForm['identifierNum-' + $index].$touched||patientRegisterForm.$submitted) &amp;&amp; patientRegisterForm['identifierNum-' + $index].$invalid }">
                                    <label class="col-xs-2 control-label" id="idNumInput">{{ 'locale.inputLabels.id' | i18n }}</label>
                                    <div class="col-xs-9 input-group">
                                      <input type="text" name="identifierNum-{{ $index }}" ng-model=" patient.identifiers[$index].identifierNum" class="form-control" placeholder="646465786868576" id="idNumInput"  />
                                      <div class="input-group-btn">
                                        <button class="btn btn-default" type="button">
                                          <span class="glyphicon glyphicon-barcode"></span>
                                          {{ 'locale.buttonLabels.scan' | i18n }}
                                        </button>
                                      </div>
                                      <select name="identifierType-{{ $index }}" ng-model="patient.identifiers[$index].identifierType" class="form-control">
                                        <option ng-repeat="(key, value) in locale.identificationTypes" value="{{value}}">{{value}}</option>
                                      </select>
                                      <div class="input-group-btn">
                                        <button class="btn btn-default btn-custom" type="button" ng-click="add('identifiers', '', {identifierNum: '', identifierType: ''})">
                                          <span class="glyphicon glyphicon-plus"></span>
                                        </button>
                                        <button class="btn btn-default btn-custom" type="button" ng-click="remove($index, 'identifiers', '')">
                                          <span class="glyphicon glyphicon-minus"></span>
                                        </button>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-xs-offset-2 col-xs-9" ng-messages="patientRegisterForm['identifierNum-' + $index].$error" ng-if="patientRegisterForm['identifierNum-' + $index].$touched||patientRegisterForm.$submitted">
                                    <p class="alert alert-danger" ng-message="required">{{ 'locale.errors.idRequired' | i18n }}</p>
                                  </div>
                                </div>
                              </fieldset>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <h3 class="panel-title">
                          <a data-toggle="collapse" href="#domicileCollapse">{{ 'locale.panelLabels.domicile' | i18n }}</a>
                        </h3>
                      </div>
                      <div id="domicileCollapse" class="panel-collapse collapse in">
                        <div class="panel-body">
                          <div class="row">
                            <div class="col-xs-12">
                              <fieldset class="form-horizontal form-group">
                                <div class="form-group" ng-class="{ 'has-error': (patientRegisterForm['cityOrVillage'].$touched||patientRegisterForm.$submitted) &amp;&amp; patientRegisterForm['cityOrVillage'].$invalid }">
                                  <label class="col-xs-2 control-label" for="cityOrVillageInput">{{ 'locale.inputLabels.cityVillage' | i18n }}</label>
                                  <div class="col-xs-9 input-group">
                                    <input type="text" ng-maxlength="50" name="cityOrVillage" ng-model="patient.birthPlace.cityOrVillage" class="form-control" id="cityOrVillageInput" placeholder="{{ 'locale.inputLabels.cityVillage' | i18n }}" />
                                  </div>
                                </div>
                                <div class="col-xs-offset-2 col-xs-9" ng-messages="patientRegisterForm['cityOrVillage'].$error" ng-if="patientRegisterForm['cityOrVillage'].$touched||patientRegisterForm.$submitted">
                                  <p class="alert alert-danger" ng-message="required">{{ 'locale.errors.cityOrVillageRequired' | i18n }}</p>
                                  <p ng-message="maxlength" class="alert alert-danger">{{ 'locale.errors.fieldLong' | i18n }}</p>
                                </div>
                                <div class="form-group">
                                  <label class="col-xs-2 control-label" for="hospitalSelect">{{ 'locale.inputLabels.birthPlace' | i18n }}</label>
                                  <div class="col-xs-9 input-group">
                                    <select name="hospital" ng-model="patient.birthPlace.hospital" class="form-control" id="hospitalSelect">
                                      <option ng-repeat="(key, value) in locale.hospitals" value="{{value}}">{{value}}</option>
                                    </select>
                                  </div>
                                </div>
                              </fieldset>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <h3 class="panel-title">
                          <a data-toggle="collapse" href="#contactCollapse">{{ 'locale.panelLabels.contactInformation' | i18n }}</a>
                        </h3>
                      </div>
                      <div id="contactCollapse" class="panel-collapse collapse in">
                        <div class="panel-body">
                          <div class="row">
                            <div class="col-xs-12">
                              <fieldset class="form-horizontal form-group">

                                <div ng-repeat="givenName in patient.contactNames.givenNames track by $index">
                                  <div class="form-group" ng-class="{ 'has-error': (patientRegisterForm['contactGivenName-' + $index].$touched||patientRegisterForm.$submitted) &amp;&amp; patientRegisterForm['contactGivenName-' + $index].$invalid }">
                                    <label class="col-xs-2 control-label" for="contactGivenNameInput">{{ 'locale.inputLabels.givenName' | i18n }}</label>
                                    <div class="col-xs-9 input-group">

                                      <input type="text" name="contactGivenName-{{ $index }}" ng-model="patient.contactNames.givenNames[$index]" class="form-control" placeholder="{{ 'locale.placeholders.givenName' | i18n }}" id="contactGivenNameInput" />
                                      <div class="input-group-btn">
                                        <button class="btn btn-default btn-custom" type="button" ng-click="add('contactNames', 'givenNames', '')">
                                          <span class="glyphicon glyphicon-plus"></span>
                                        </button>
                                        <button class="btn btn-default btn-custom" type="button" ng-click="remove($index, 'contactNames', 'givenNames')">
                                          <span class="glyphicon glyphicon-minus"></span>
                                        </button>
                                      </div>
                                    </div>
                                  </div>

                                  <div class="col-xs-offset-2 col-xs-9" ng-messages="patientRegisterForm['contactGivenName-' + $index].$error" ng-if="patientRegisterForm['contactGivenName-' + $index].$touched||patientRegisterForm.$submitted">
                                    <p class="alert alert-danger" ng-message="required">{{ 'locale.errors.givenNameRequired' | i18n }}</p>
                                  </div>
                                </div>

                                <div ng-repeat="familyName in patient.contactNames.familyNames track by $index">
                                  <div class="form-group" ng-class="{ 'has-error': (patientRegisterForm['contactFamilyName-' + $index].$touched||patientRegisterForm.$submitted) &amp;&amp; patientRegisterForm['contactFamilyName-' + $index].$invalid }">
                                    <label class="col-xs-2 control-label" id="contactFamilyNameInput">{{ 'locale.inputLabels.familyName' | i18n }}</label>

                                    <div class="col-xs-9 input-group">

                                      <input type="text" name="contactFamilyName-{{ $index }}" ng-model="patient.contactNames.familyNames[$index]" class="form-control" placeholder="{{ 'locale.placeholders.familyName' | i18n }}" aria-describedby="contactFamilyNameAddon"  />
                                      <div class="input-group-btn">
                                        <button class="btn btn-default btn-custom" type="button" ng-click="add('contactNames', 'familyNames', '')">
                                          <span class="glyphicon glyphicon-plus"></span>
                                        </button>
                                        <button class="btn btn-default btn-custom" type="button" ng-click="remove($index, 'contactNames', 'familyNames')">
                                          <span class="glyphicon glyphicon-minus"></span>
                                        </button>
                                      </div>
                                    </div>
                                  </div>

                                  <div class="col-xs-offset-2 col-xs-9" ng-messages="patientRegisterForm['contactFamilyName-' + $index].$error" ng-if="patientRegisterForm['contactFamilyName-' + $index].$touched||patientRegisterForm.$submitted">
                                    <p class="alert alert-danger" ng-message="required">{{ 'locale.errors.familyNameRequired' | i18n }}</p>
                                  </div>
                                </div>

                                <div ng-repeat="contactNumber in patient.contactPhones track by $index">
                                  <div class="form-group" ng-class="{ 'has-error': (patientRegisterForm['phoneNum-' + $index].$touched||patientRegisterForm.$submitted) &amp;&amp; patientRegisterForm['phoneNum-' + $index].$invalid }">
                                    <label class="col-xs-2 control-label" for="phoneNumInput">{{ 'locale.inputLabels.telephone' | i18n }}</label>
                                    <div class="col-xs-9 input-group">

                                      <input type="text" name="phoneNum-{{ $index }}" ng-model="patient.contactPhones[$index].phoneNum" class="form-control" placeholder="465432345689976533" id="phoneNumInput"  />
                                      <span class="input-group-addon addon-background" id="phoneTypeAddon">
                                        <span class="glyphicon glyphicon-earphone"></span>
                                      </span>
                                      <select name="phoneType-{{ $index }}" ng-model="patient.contactPhones[$index].phoneType" class="form-control" aria-describedby="phoneTypeAddon">
                                        <option ng-repeat="(key, value) in locale.phone" value="{{value}}">{{value}}</option>
                                      </select>
                                      <div class="input-group-btn">
                                        <button class="btn btn-default btn-custom" type="button" ng-click="add('contactPhones', '', {phoneNum: '', phoneType: ''})">
                                          <span class="glyphicon glyphicon-plus"></span>
                                        </button>
                                        <button class="btn btn-default btn-custom" type="button" ng-click="remove($index, 'contactPhones', '')">
                                          <span class="glyphicon glyphicon-minus"></span>
                                        </button>
                                      </div>
                                    </div>
                                  </div>

                                  <div class="col-xs-offset-2 col-xs-9" ng-messages="patientRegisterForm['phoneNum-' + $index].$error" ng-if="patientRegisterForm['phoneNum-' + $index].$touched||patientRegisterForm.$submitted">
                                    <p class="alert alert-danger" ng-message="required">{{ 'locale.errors.telephoneRequired' | i18n }}</p>
                                    <p class="alert alert-danger" ng-message="phone">{{ 'locale.errors.telephone' | i18n }}</p>
                                  </div>
                                </div>

                                <div ng-repeat="contactEmail in patient.contactEmails track by $index">
                                  <div class="form-group" ng-class="{ 'has-error': (patientRegisterForm['email-' + $index].$touched||patientRegisterForm.$submitted) &amp;&amp; patientRegisterForm['email-' + $index].$invalid }">
                                    <label class="col-xs-2 control-label" for="emailInput">{{ 'locale.inputLabels.email' | i18n }}</label>
                                    <div class="col-xs-9 input-group">
                                      <input type="email" name="email-{{ $index }}" ng-model="patient.contactEmails[$index].email" class="form-control" placeholder="{{ 'locale.placeholders.email' | i18n }}" id="emailInput"  />

                                      <span class="input-group-addon addon-background" id="domainAddon">@</span>
                                      <select name="domainType" ng-model="patient.contactEmails[$index].domainType" id="domainSelect" class="form-control" aria-describedby="domainAddon">
                                        <option ng-repeat="(key, value) in locale.domainTypes" value="{{value}}">{{value}}</option>
                                      </select>
                                      <div class="input-group-btn">
                                        <button class="btn btn-default btn-custom" type="button" ng-click="add('contactEmails', '', {email: '', domainType: ''})">
                                          <span class="glyphicon glyphicon-plus"></span>
                                        </button>
                                        <button class="btn btn-default btn-custom" type="button" ng-click="remove($index, 'contactEmails', '')">
                                          <span class="glyphicon glyphicon-minus"></span>
                                        </button>
                                      </div>
                                    </div>
                                  </div>

                                  <div class="col-xs-offset-2 col-xs-9" ng-messages="patientRegisterForm['email-' + $index].$error" ng-if="patientRegisterForm['email-' + $index].$touched||patientRegisterForm.$submitted">
                                    <p class="alert alert-danger" ng-message="required">{{ 'locale.errors.emailRequired' | i18n }}</p>
                                    <p class="alert alert-danger" ng-message="email">{{ 'locale.errors.email' | i18n }}</p>
                                  </div>
                                </div>

                                <div class="form-group">
                                  <label class="col-xs-2 control-label" for="relationTypeInput">{{ 'locale.inputLabels.relationshipToPatient' | i18n }}</label>
                                  <div class="col-xs-9 input-group">
                                    <select name="relationshipType" ng-model="patient.contactRelationship" class="form-control" id="relationshipTypeSelect"  ng-options="concept.id as concept.text for concept in relationshipTypes">
                                    </select>
                                  </div>
                                </div>
                              </fieldset>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <h3 class="panel-title">
                          {{ 'locale.panelLabels.additionalInfo' | i18n }}
                        </h3>
                      </div>
                      <div class="panel-body">
                        <div class="form-group">
                          <div class="checkbox">
                            <label for="tetanusCheck">
                              <input type="checkbox" ng-model="patient.tetanusStatus" name="tetanusStatus" id="tetanusCheck" /> {{ 'locale.checkLabels.tetanusDiagnosis' | i18n }}
                            </label>
                          </div>
                          <div class="checkbox">
                            <label for="breastFeedingCheck">
                              <input type="checkbox" ng-model="patient.breastFeedingStatus" name="breastFeedingStatus" id="breastFeedingCheck" /> {{ 'locale.checkLabels.breastfeedingStatus' | i18n }}
                            </label>
                          </div>
                          <div class="checkbox">
                            <label for="birthCertCheck">
                              <input type="checkbox" ng-model="patient.birthCertificateStatus" name="birthCertificateStatus" id="birthCertCheck" /> {{ 'locale.checkLabels.birthCertificate' | i18n }}
                            </label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <button type="submit" ng-click="printPatient()" class="btn btn-primary pull-right">{{ 'locale.buttonLabels.register' | i18n }}</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </content>
    </contentHtml>
  </asset>
  <asset name="patient-admin-controller" mimeType="text/javascript">
    <contentText>
      <![CDATA[
      layoutApp.controller('PatientAdministrationController', ['$scope', 'localize', function ($scope, localize)
		  {

      }]);

      ]]>
    </contentText>
  </asset>
  <asset name="patientView" mimeType="text/html">
    <contentHtml>
      <!-- absolute reference to the layout -->
      <layout>app://openiz.org/applet/org.timr.applet.layout/patientLayout</layout>
      <script>patient-view-controller</script>
      <bundle>select2</bundle>
      <content>
        <div class="row" ng-controller="PatientViewController" xmlns="http://www.w3.org/1999/xhtml">
          <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active">
              <a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">{{ 'locale.tabHeaders.patientProfile' | i18n }}</a>
            </li>
            <li role="presentation" class="active">
              <a href="#history" aria-controls="history" role="tab" data-toggle="tab">{{ 'locale.tabHeaders.patientHistory' | i18n }}</a>
            </li>
            <li role="presentation" class="active">
              <a href="#observations" aria-controls="observations" role="tab" data-toggle="tab">{{ 'locale.tabHeaders.patientObservation' | i18n }}</a>
            </li>
            <li role="presentation" class="active">
              <a href="#aefi" aria-controls="aefi" role="tab" data-toggle="tab">{{ 'locale.tabHeaders.patientAefi' | i18n }}</a>
            </li>
          </ul>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane active" id="profile">
              
            </div>
            <div role="tabpanel" class="tab-pane" id="history"></div>
            <div role="tabpanel" class="tab-pane" id="observations"></div>
            <div role="tabpanel" class="tab-pane" id="aefi"></div>

          </div>
        </div>
      </content>
    </contentHtml>
  </asset>
  <asset name="patient-search-controller" mimeType="text/javascript">
    <contentText>
      <![CDATA[
		  layoutApp.controller('PatientSearchController', ['$scope', 'localize', function ($scope, localize)
		  {
        $scope.initialize = function() {
          $scope.datetimeFrom = new Date();
          $scope.datetimeTo = new Date();
          $scope.popupFrom = {
            opened: false
          };
          $scope.popupTo = {
            opened: false
          };
          $scope.dateOptionsFrom = {
            formatYear: 'yy',
            minDate: new Date(1990, 1, 1),
            maxDate: new Date()
          };

           $scope.dateOptionsTo = {
            formatYear: 'yy',
            minDate: new Date(1990, 1, 1),
            maxDate: new Date()
          };
          
          $scope.phoneRegex = '^\\d{3}-\\d{3}-\\d{4}$';
        };

        $scope.searchAgain = function() {
          $('#searchPanel').collapse('show');
          $scope.searchResults = null;
        };
        
        $scope.openFrom = function() {
          $scope.popupFrom.opened = true;
        };

         $scope.openTo = function() {
          $scope.popupTo.opened = true;
         };
                   
        $scope.updateDobTo = function(){
            $scope.dateOptionsFrom = {
              maxDate: new Date($scope.query.dob.to.getFullYear(), $scope.query.dob.to.getMonth(),  $scope.query.dob.to.getDate())
            };
        }
        
        $scope.updateDobFrom = function(){
            $scope.dateOptionsTo = {
              minDate: new Date($scope.query.dob.from.getFullYear(), $scope.query.dob.from.getMonth(),  $scope.query.dob.from.getDate())
            };
        }

        $scope.view = function(patient){
          window.location.href = "/applet/org.timr.applet.patientAdministration/patientView?pid=" + patient.id ;
        }
                
        $scope.scanBarcodeLink = function()
        {
          $scope.barcode = OpenIZ.App.scanBarcode(); //Once this is implemented
        }
        
        $scope.cancel = function()
        {
          window.history.back();
        }

        $scope.log = function(patient){
          console.log(patient);
        }
        
        $scope.search = function(invalid)
        {
          $('#waitDialog').modal('show');
          
          try
          {
            if(!invalid && $scope.query){
              var searchString = "";
              if($scope.query.identifiers)
                searchString += "&identifier.value=" + $scope.query.identifiers.value;
              if($scope.query.dob && $scope.query.dob.from)
                searchString += "&dateOfBirth=>" + OpenIZ.Util.toDateInputString($scope.query.dob.from);
              if($scope.query.dob && $scope.query.dob.to)
                searchString += "&dateOfBirth=<" + OpenIZ.Util.toDateInputString($scope.query.dob.to);
              if($scope.query.names && $scope.query.names.given)
                searchString += "&name.component[Given].value=" + $scope.query.names.given;
              if($scope.query.names && $scope.query.names.family)
                searchString += "&name.component[Family].value=" + $scope.query.names.family;
              if($scope.query.mother && $scope.query.mother.given)
                searchString += "&relationship.target.name[Given].value=" + $scope.query.mother.given;
              if($scope.query.mother && $scope.query.mother.family)
                searchString += "&relationship.target.name[Family].value=" + $scope.query.mother.given;
             
              // TODO: Update the URL so we can re-populate and run search results
            
                OpenIZ.Patient.findAsync(
                {
                  query: searchString.substring(1, searchString.length),
                  continueWith: function(result)
                  {
                    $('#searchPanel').collapse('hide');
                    $('#waitDialog').modal('hide');
                   
                    $scope.$apply(function() { $scope.searchResults = result.all('Patient'); });
                    // TODO: Pagination and results
                  },
                  onException : function(ex) {
                    toastr.error(ex);
                    $('#waitDialog').modal('hide');
                  }
                }
              );
              
            }
            else{
              toastr.options = {"positionClass":"toast-top-center",
              "timeOut": 5000};
              toastr.error(localize.getString('locale.toastrText.invalidForm'), localize.getString('locale.toastrHeaders.invalidForm'));
            }
          }
          catch(ex)
          {
            toastr.error(ex); 
            $('#waitDialog').modal('hide');
            
          }
       }
        
        $scope.initialize();

      }]);

      ]]>
    </contentText>
  </asset>
  <asset name="patient-register-controller" mimeType="text/javascript">
    <contentText>
      <![CDATA[

		  layoutApp.controller('PatientRegisterController', ['$scope', 'localize', function ($scope ,localize)
		  {
        $scope.patient = {
          patientNames: {
            givenNames: [""],
            familyNames: [""]
          },
          dob: {
            date: new Date(),
            accuracy: 10
          },
          gender: "",
          identifiers: [{
            identifierNum: "",
            identifierType: ""
          }],
          tetanusStatus: false,
          breastFeedingStatus: false,
          birthCertificateStatus: false,
          birthPlace: {
            cityOrVillage: "",
            hospital: ""
          },
          contactNames: {
            givenNames: [""],
            familyNames: [""]
          },
          contactPhones: [{
            phoneNum: "",
            phoneType: ""
          }],
          contactEmails: [{
            email: "",
            domainType: ""
          }]
        };

        $scope.initialize = function() {
          OpenIZ.Concept.findConceptSetAsync({
            query: "mnemonic=ChildFamilyMember",
            continueWith: function(results) {
              var concepts = results.first("ConceptSet").toSelectModel();
              $scope.$apply(function() { $scope.relationshipTypes = concepts; });
            }
          });
          OpenIZ.Concept.findConceptSetAsync({
            query: "mnemonic=AdministrativeGenderCode",
            continueWith: function(results) {
              var concepts = results.first("ConceptSet").toSelectModel();
              $scope.$apply(function() { $scope.administrativeGenderTypes = concepts; });
            }
          });
        };
 
         $scope.openDOB = function() {
          $scope.popupDOB.opened = true;
         };

         $scope.popupDOB = {
            opened: false
          };

          $scope.dateOptions = {
            formatYear: 'yy',
            maxDate: new Date(),
            minDate: new Date(1990, 1, 1),
            startingDay: 1
          };

        $scope.remove = function(index, outerModelAccess, innerModelAccess) {
          if(index != 0){
            if(innerModelAccess == "")
            {
               $scope.patient[outerModelAccess].splice(index, 1);
            }
            else
            {
               $scope.patient[outerModelAccess][innerModelAccess].splice(index, 1);
            }
          }
        };

          $scope.allPatients = [];
          for(var i = 0; i<100; i++){
            $scope.allPatients[i] = $scope.randomPatient();
          }

        $scope.add = function(outerModelAccess, innerModelAccess, objToPush) {
          if(innerModelAccess == ""){
            $scope.patient[outerModelAccess].push(objToPush);
          }
          else {
            $scope.patient[outerModelAccess][innerModelAccess].push(objToPush);
          }
        };

        $scope.printPatient = function(){
          console.log($scope.patient);
        };

        $scope.searchForDuplicates = function()
        {
           var searchString = "";
              if($scope.patient.dob && $scope.patient.dob.date)
                searchString += "&dateOfBirth=~" + OpenIZ.Util.toDateInputString($scope.patient.dob.date).substring(0, $scope.patient.dob.accuracy);
              if($scope.patient.patientNames && 
                $scope.patient.patientNames.givenNames &&
                $scope.patient.patientNames.givenNames[0] != ""
              )
                searchString += "&name.component[Given].value=~" + $scope.patient.patientNames.givenNames[0];
              if($scope.patient.patientNames && 
                $scope.patient.patientNames.familyNames &&
                $scope.patient.patientNames.familyNames[0] != "")
                searchString += "&name.component[Family].value=~" + $scope.patient.patientNames.familyNames[0];
              if($scope.patient.gender)
                searchString += "&genderConcept=" + $scope.patient.gender;
             
              // TODO: Update the URL so we can re-populate and run search results
            
                OpenIZ.Patient.findAsync(
                {
                  query: searchString.substring(1, searchString.length),
                  count: 5,
                  continueWith: function(result)
                  {
                    $scope.$apply(function() { $scope.searchResults = result.all('Patient'); });
                  },
                  onException : function(ex) {
                    toastr.error(ex);
                    $('#waitDialog').modal('hide');
                  }
                }
              );
        };

        $scope.register = function(invalid)
        {

          if(!invalid){
             $('#waitDialog').modal('hide');
             var patientData = {
               dateOfBirth : $scope.patient.dob.date,
               dateOfBirthPrecision : $scope.patient.dob.accuracy == 10 ? 'Day' : $scope.patient.dob.accuracy == 7 ? 'Month' : 'Year',
               genderConcept : $scope.patient.gender,
             };
             var patient = new OpenIZModel.Patient(patientData);
             patient.addName(OpenIZModel.NameUseKeys.OfficialRecord, { 
                Given : $scope.patient.patientNames.givenNames,
                Family : $scope.patient.patientNames.familyNames
             });
              OpenIZ.Patient.insertAsync({
               patient : patient,
               continueWith : function(result) {
                 alert("Inserted as " + result.id);
               },
               onException : function(ex) { alert("Error " + ex); }
             });
          }
          else{
            toastr.options = {"positionClass":"toast-top-center",
            "timeOut": 5000};
            toastr.error(localize.getString('locale.toastrText.invalidForm'), localize.getString('locale.toastrHeaders.invalidForm'));
          }
        };

        $scope.initialize();
      }]);

      ]]>
    </contentText>
  </asset>
  <asset name="patient-view-controller" mimeType="text/javascript">
    <contentText>
      <![CDATA[
      layoutApp.controller('PatientViewController', ['$scope', 'localize', function ($scope, localize)
		  {
        
      }]);
      ]]>
    </contentText>
  </asset>
</AppletManifest>