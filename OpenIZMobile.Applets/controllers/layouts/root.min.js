var layoutApp=angular.module("layout",["openiz","ngSanitize","ui.router","angular.filter"]).config(["$compileProvider","$stateProvider","$urlRouterProvider",function(n,t){n.aHrefSanitizationWhitelist(/^\s*(http|tel):/);n.imgSrcSanitizationWhitelist(/^\s*(http|tel):/);var i=!1;OpenIZ.UserInterface.states.forEach(function(n){i|=n.url=="/";t.state(n)});i||t.state({name:"org-openiz-core-index",url:"/",abstract:!1,views:{"":{controller:"",templateUrl:"/org.openiz.core/views/landing.html"}}})}]).run(function(n){n.isLoading=!0;n.extendToast=null;window.location.hash==""&&(window.location.hash="#/");OpenIZ.Configuration.getConfigurationAsync({continueWith:function(t){n.system={};n.system.config=t;n.$apply()}});n.$on("$stateChangeError",console.log.bind(console));n.$on("$stateChangeStart",function(){n.isLoading=!0});n.$on("$stateChangeSuccess",function(){OpenIZ.App.hideWait();n.isLoading=!1});n.page={title:OpenIZ.App.getCurrentAssetTitle(),loadTime:new Date,maxEventTime:(new Date).tomorrow(),minEventTime:(new Date).yesterday(),locale:OpenIZ.Localization.getLocale(),onlineState:OpenIZ.App.getOnlineState()};setInterval(function(){n.page.onlineState=OpenIZ.App.getOnlineState();n.session&&n.session.exp.getDate()-(new Date).getDate()<10&&(n.extendToast?n.extendToast.show():n.extendToast=toastr.warning(OpenIZ.Localization.getString("locale.session.aboutToExpire")+expiry+"<br/><button class='btn btn-primary' onclick='OpenIZ.Authentication.refreshSessionAsync()'>"+OpenIZ.Localization.getString("locale.session.extend")+"<\/button>"));OpenIZ.Authentication.refreshSessionAsync();n.$applyAsync()},1e4);OpenIZ.Authentication.getSessionAsync({continueWith:function(t){n.session=t;t!=null&&t.entity!=null&&(t.entity.telecom=t.entity.telecom||{},Object.keys(t.entity.telecom).length==0&&(t.entity.telecom.MobilePhone={value:""}));OpenIZ.Configuration.getUserPreferencesAsync({continueWith:function(t){var r,i;n.session.prefs={};for(r in t.application.setting)i=t.application.setting[r],n.session.prefs[i.key]=i.value}});n.$apply()}});n.changeInputType=function(n,t){$(n).attr("type",t);$(n).attr("data-max-"+t)!=null&&$(n).attr("max",$(n).attr("data-max-"+t))};n.OpenIZ=OpenIZ});layoutApp.service("queryUrlParameterService",[function(){function n(){for(var t=window.location.href,i=/[\?|\&]([^=]+)\=([^&]+)/g,n={};(match=i.exec(t))!=null;)n[match[1]]=match[2];return n}return{getUrlParameters:n}}]);angular.element(document).ready(function(){$("[data-toggle=popover]").popover({container:"body"});$("[data-toggle=popover]").on("shown.bs.popover",function(){$("[data-toggle=popover]").not(this).popover("hide")});$("#initialBlock").remove();$("#waitModal").removeClass("in");$("#waitModal").removeAttr("style")});