/*
 * Copyright 2015-2017 Mohawk College of Applied Arts and Technology
 * 
 * 
 * Licensed under the Apache License, Version 2.0 (the "License"); you 
 * may not use this file except in compliance with the License. You may 
 * obtain a copy of the License at 
 * 
 * http://www.apache.org/licenses/LICENSE-2.0 
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the 
 * License for the specific language governing permissions and limitations under 
 * the License.
 * 
 * User: fyfej
 * Date: 2016-11-14
 */
var layoutApp=angular.module("layout",["openiz","ngSanitize","ui.router"]).config(["$compileProvider","$stateProvider","$urlRouterProvider",function(n,t){n.aHrefSanitizationWhitelist(/^\s*(http|tel):/);n.imgSrcSanitizationWhitelist(/^\s*(http|tel):/);OpenIZ.UserInterface.states.forEach(function(n){t.state(n)})}]).run(function(n){n.isLoading=!0;window.location.hash==""&&(window.location.hash="#/");OpenIZ.Configuration.getConfigurationAsync({continueWith:function(t){n.system={};n.system.config=t;n.$apply()}});n.$on("$stateChangeError",console.log.bind(console));n.$on("$stateChangeStart",function(){n.isLoading=!0});n.$on("$stateChangeSuccess",function(){OpenIZ.App.hideWait();n.isLoading=!1});n.page={title:OpenIZ.App.getCurrentAssetTitle(),loadTime:new Date,maxEventTime:(new Date).tomorrow(),minEventTime:(new Date).yesterday(),locale:OpenIZ.Localization.getLocale(),onlineState:OpenIZ.App.getOnlineState()};setInterval(function(){n.page.onlineState=OpenIZ.App.getOnlineState();n.$applyAsync()},1e4);OpenIZ.Authentication.getSessionAsync({continueWith:function(t){n.session=t;t!=null&&t.entity!=null&&(t.entity.telecom=t.entity.telecom||{},Object.keys(t.entity.telecom).length==0&&(t.entity.telecom.MobilePhone={value:""}));n.$apply()}});n.changeInputType=function(n,t){$(n).attr("type",t);$(n).attr("data-max-"+t)!=null&&$(n).attr("max",$(n).attr("data-max-"+t))};n.OpenIZ=OpenIZ});layoutApp.service("queryUrlParameterService",[function(){function n(){for(var t=window.location.href,i=/[\?|\&]([^=]+)\=([^&]+)/g,n={};(match=i.exec(t))!=null;)n[match[1]]=match[2];return n}return{getUrlParameters:n}}]);angular.element(document).ready(function(){$("[data-toggle=popover]").popover({container:"body"});$("[data-toggle=popover]").on("shown.bs.popover",function(){$("[data-toggle=popover]").not(this).popover("hide")});$("#initialBlock").remove();$("#waitModal").removeClass("in");$("#waitModal").removeAttr("style")});