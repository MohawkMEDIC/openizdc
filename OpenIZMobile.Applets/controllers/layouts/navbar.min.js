layoutApp.controller("LayoutController",["$scope","$interval","$rootScope","$window",function(n,t,i,r){OpenIZ.App.getMenusAsync({continueWith:function(t){n.menuItems=t;n.$applyAsync()}});n.logout=n.logout||function(){confirm(OpenIZ.Localization.getString("locale.layout.navbar.logout.confirm"))&&OpenIZ.Authentication.abandonSession({continueWith:function(n){console.log(n);window.location.hash="#/";r.location.reload()},onException:function(n){console.log(n)}})};n.setLocale=n.setLocale||function(n){OpenIZ.Localization.setLocale(n);window.location.hash="#/";r.location.reload(!0)};n.checkMessages=function(){OpenIZ.App.getAlertsAsync({query:{flags:"!2"},continueWith:function(t){if(i.session!=null&&(n.messages==null||t.length!=n.messages.length)){var u=t.length-(n.messages==null?0:n.messages.length),r={preventDuplicates:!0,showDuration:150,hideDuration:250,timeout:2e3};u==1?toastr.info(t[0].subject+"...",t[0].from,r):toastr.info(OpenIZ.Localization.getString("locale.alerts.newAlerts"),r);n.messages=t;n.$apply()}setTimeout(n.checkMessages,3e4)}})};setTimeout(n.checkMessages,3e4);n.checkMessages()}]);