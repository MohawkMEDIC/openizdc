layoutApp.controller("SettingsController",["$scope",function(n){n.config={security:OpenIZ.Configuration.getSection("SecurityConfigurationSection"),realmName:OpenIZ.Configuration.getRealm(),data:OpenIZ.Configuration.getSection("DataConfigurationSection"),applet:OpenIZ.Configuration.getSection("AppletConfigurationSection"),application:OpenIZ.Configuration.getSection("ApplicationConfigurationSection"),log:OpenIZ.Configuration.getSection("DiagnosticsConfigurationSection"),network:OpenIZ.Configuration.getSection("ServiceClientConfigurationSection")||{}};n.config.network.useProxy=n.config.network.proxyAddress!=null;n.config.network.proxyAddress=n.config.network.proxyAddress||null;n.ui={dataCollapsed:!0,securityCollapsed:!0};n.config.data.mode="sync";n.config.data.sync={event:[],enablePoll:OpenIZ.App.getService("ImsiPollingService")!=null,pollInterval:OpenIZ.Configuration.getApplicationSetting("imsi.poll.interval")};n.config.log.mode=n.config.log.trace[0].filter||"Warning";n.config.security.hasher=OpenIZ.App.getService("IPasswordHashingService")||"SHA256PasswordHasher";n.config.security.offline={enable:!1};n.master={};n.leaveRealm=function(n){confirm(OpenIZ.Localization.getString("locale.settings.confirm.leaveRealm"))&&OpenIZ.Configuration.leaveRealm(n)};n.joinRealm=function(n){OpenIZ.Configuration.joinRealm(n.domain,n.deviceName)&&alert(OpenIZ.Localization.getString("locale.settings.status.joinRealm"))};n.save=function(n){OpenIZ.Configuration.getRealm()==null?alert(OpenIZ.Localization.getString("locale.settings.error.noRealm")):OpenIZ.Configuration.save(n)&&OpenIZ.App.close()};n.reset=function(){n.user=angular.copy(n.master)};n.reset()}]);