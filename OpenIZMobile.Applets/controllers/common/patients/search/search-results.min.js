$(document).ready(function(){$("table.oiz-patient-results").each(function(n,t){var i=angular.element(t).scope();i.search=i.search||{};i.search.query=i.search.query||{};i.search.results=null;i.search.paging=i.search.paging||{size:10};i.search.search=i.search.search||function(){OpenIZ.App.showWait(OpenIZ.Localization.getString("locale.dialog.wait.text"));i.search.query._offset=0;i.search.query._count=i.search.paging.size;OpenIZ.Patient.findAsync({query:i.search.query,continueWith:function(n){i.search.results=n;i.search.paging={current:1,total:n.totalResults==0?1:n.totalResults/i.search.paging.size,size:i.search.paging.size,pages:[]};for(var t=0;t<i.search.paging.total;t++)i.search.paging.pages[t]=t+1;i.$apply()},onException:function(n){OpenIZ.App.toast(n.message)},"finally":function(){OpenIZ.App.hideWait()}})};i.search.next=i.search.next||function(){(OpenIZ.App.showWait(OpenIZ.Localization.getString("locale.dialog.wait.text")),i.search.paging.current!=i.search.paging.count)&&(i.search.paging.current++,i.search.query._offset=(i.search.paging.current-1)*i.search.paging.size,i.search.query._count=i.search.paging.size,OpenIZ.Patient.findAsync({query:i.search.query,continueWith:function(n){i.search.results=n;i.$apply()},onException:function(n){OpenIZ.App.toast(n.message)},"finally":function(){OpenIZ.App.hideWait()}}))};i.search.previous=i.search.previous||function(){(OpenIZ.App.showWait(OpenIZ.Localization.getString("locale.dialog.wait.text")),i.search.paging.current!=1)&&(i.search.paging.current--,i.search.query._offset=(i.search.paging.current-1)*i.search.paging.size,i.search.query._count=i.search.paging.size,OpenIZ.Patient.findAsync({query:i.search.query,continueWith:function(n){i.search.results=n;i.$apply()},onException:function(n){OpenIZ.App.toast(n.message)},"finally":function(){OpenIZ.App.hideWait()}}))};i.search.goPage=i.search.goPage||function(n){OpenIZ.App.showWait(OpenIZ.Localization.getString("locale.dialog.wait.text"));i.search.paging.current=n;i.search.query._offset=(i.search.paging.current-1)*i.search.paging.size;i.search.query._count=i.search.paging.size;OpenIZ.Patient.findAsync({query:i.search.query,continueWith:function(n){i.search.results=n;i.$apply()},onException:function(n){OpenIZ.App.toast(n.message)},"finally":function(){OpenIZ.App.hideWait()}})};i.act={};OpenIZ.Act.getActTemplateAsync({templateId:"Act.PatientEncounter.Checkin",continueWith:function(n){i.act=n},onException:function(n){console.log(n)}});i.startEncounter=function(n){i.act.participation.RecordTarget.player=n.id;OpenIZ.Ims.post({resource:"Act",data:i.act,continueWith:function(){OpenIZ.App.toast(OpenIZ.Localization.getString("locale.patient.queue.success"))},onException:function(n){console.log(n);OpenIZ.App.toast(OpenIZ.Localization.getString("locale.patient.queue.error"))}})}})});